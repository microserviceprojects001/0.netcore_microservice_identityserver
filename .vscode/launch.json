{
    "version": "0.2.0",
    "configurations": [
        {
            "name": ".NET Core MVCCookieAuthSample",
            "type": "coreclr",
            "request": "launch",
            "preLaunchTask": "buildMVCCookieAuthSample", // 关键！调用 tasks.json 中的 "build" 任务
            "program": "${workspaceFolder}\\MVCCookieAuthSample\\bin\\Debug\\net9.0\\MVCCookieAuthSample.dll", // 直接指定DLL
            "args": [],
            "cwd": "${workspaceFolder}/MVCCookieAuthSample",
            "console": "integratedTerminal",
            "symbolOptions": {
                "searchPaths": [
                    "${workspaceFolder}\\MVCCookieAuthSample\\bin\\Debug\\net9.0" // 改为单层目录
                ],
                "searchMicrosoftSymbolServer": true
            },
            "logging": {
                "moduleLoad": true
            },
            "env": {
                "ASPNETCORE_ENVIRONMENT": "Development" // 强制使用 Development 环境
            }
        },        
        
        {
            "name": ".NET Core MVCClient",
            "type": "coreclr",
            "request": "launch",
            "preLaunchTask": "buildMVCClient", // 关键！调用 tasks.json 中的 "build" 任务
            "program": "${workspaceFolder}\\MVCClient\\bin\\Debug\\net9.0\\MVCClient.dll", // 直接指定DLL
            "args": [],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "symbolOptions": {
                "searchPaths": [
                    "${workspaceFolder}\\MVCClient\\bin\\Debug\\net9.0" // 改为单层目录
                ],
                "searchMicrosoftSymbolServer": true
            },
            "logging": {
                "moduleLoad": true
            }
        },
        {
            "name": ".NET Core PwdClient",
            "type": "coreclr",
            "request": "launch",
            "preLaunchTask": "pwdClient", // 关键！调用 tasks.json 中的 "build" 任务
            "program": "${workspaceFolder}\\projects\\IdentityServerSample\\PwdClient\\bin\\Debug\\net9.0\\PwdClient.dll", // 直接指定DLL
            "args": [],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "symbolOptions": {
                "searchPaths": [
                    "${workspaceFolder}\\projects\\IdentityServerSample\\PwdClient\\bin\\Debug\\net9.0" // 改为单层目录
                ],
                "searchMicrosoftSymbolServer": true
            },
            "logging": {
                "moduleLoad": true
            }
        },
        {
            "name": ".NET Core IdentityServerCenter",
            "type": "coreclr",
            "request": "launch",
            "preLaunchTask": "IdentityServerCenter", // 关键！调用 tasks.json 中的 "build" 任务
            "program": "${workspaceFolder}\\projects\\IdentityServerSample\\IdentityServerCenter\\bin\\Debug\\net9.0\\IdentityServerCenter.dll", // 直接指定DLL
            "args": [],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "symbolOptions": {
                "searchPaths": [
                    "${workspaceFolder}\\projects\\IdentityServerSample\\IdentityServerCenter\\bin\\Debug\\net9.0" // 改为单层目录
                ],
                "searchMicrosoftSymbolServer": true
            },
            "logging": {
                "moduleLoad": true
            }
        },
        {
            "name": ".NET Core ThirdPartyDemo",
            "type": "coreclr",
            "request": "launch",
            "preLaunchTask": "ThirdPartyDemo", // 关键！调用 tasks.json 中的 "build" 任务
            "program": "${workspaceFolder}\\projects\\IdentityServerSample\\ThirdPartyDemo\\bin\\Debug\\net9.0\\ThirdPartyDemo.dll", // 直接指定DLL
            "args": [],
            "cwd": "${workspaceFolder}",
            "console": "integratedTerminal",
            "symbolOptions": {
                "searchPaths": [
                    "${workspaceFolder}\\projects\\IdentityServerSample\\ThirdPartyDemo\\bin\\Debug\\net9.0" // 改为单层目录
                ],
                "searchMicrosoftSymbolServer": true
            },
            "logging": {
                "moduleLoad": true
            }
        },
    ]
}

// {
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": ".NET Core Launch (MVC)",
//             "type": "coreclr",  // 强制使用 coreclr 调试器
//             "request": "launch",
//             "program": "dotnet",
//             "args": ["run", "--project", "${workspaceFolder}/MvcCookieAuthSample.csproj"],
//             "cwd": "${workspaceFolder}",
//             "stopAtEntry": false,
//             "serverReadyAction": {
//                 "action": "openExternally",
//                 "pattern": "Now listening on:\\s+(https?://\\S+)",  // 匹配日志中的URL
//                 "uriFormat": "%s"  // 直接使用监听的URL
//             },
//             "justMyCode": false,  // 确保能调试所有代码（包括库代码）
//             "symbolOptions": {
//                 "searchPaths": ["${workspaceFolder}/bin/Debug/net9.0/**"]  // 确保 PDB 文件被加载
//             },
//             "env": {
//                 "ASPNETCORE_ENVIRONMENT": "Development"
//             }
//         }
//     ]
// }